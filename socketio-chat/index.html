<!DOCTYPE html>
<html>
<head>
  <title>Socket.IO Chat Test</title>
</head>
<body>

  <h2>Socket.IO Chat</h2>

  <input id="userId" placeholder="Your User ID" />
  <button onclick="connect()">Connect</button>

  <br><br>

  <input id="to" placeholder="Send to User ID" />
  <input id="message" placeholder="Message" />
  <button onclick="send()">Send</button>

  <pre id="log"></pre>

  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script>
    let socket;

    function connect() {
      const userId = document.getElementById("userId").value;

      socket = io("https://opulent-fiesta-g4vj7xr55wv9c9p7x-8080.app.github.dev");

      socket.on("connect", () => {
        socket.emit("join", userId);
      });

      socket.on("chat", (data) => {
        document.getElementById("log").textContent +=
          `\n${data.from}: ${data.message}`;
      });
    }

    function send() {
      socket.emit("chat", {
        to: document.getElementById("to").value,
        message: document.getElementById("message").value
      });
    }
  </script>

</body>
</html>
